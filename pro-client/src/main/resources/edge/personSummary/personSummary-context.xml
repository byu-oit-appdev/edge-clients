<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xmlns:cache="http://www.springframework.org/schema/cache"
		xmlns:c="http://www.springframework.org/schema/c"
		xmlns:p="http://www.springframework.org/schema/p"
		xsi:schemaLocation="
		http://www.springframework.org/schema/beans   http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
		http://www.springframework.org/schema/cache   http://www.springframework.org/schema/cache/spring-cache-3.1.xsd
		">

	<bean id="sharedSecretCredentialResolver" class="edu.byu.security.hmac.DaoSharedSecretCredentialResolver"
			c:credentialDAO-ref="sharedSecretCredentialDAO" />

	<bean id="credentialResolutionRequest" class="edu.byu.security.hmac.PersonIdCredentialResolutionRequest"
			c:personId="766224702" />

	<bean id="sharedSecretNonceEncodingFilter" class="edu.byu.security.hmac.jersey.SharedSecretNonceEncodingFilter"
			c:credentialResolver-ref="sharedSecretCredentialResolver"
			c:resolutionRequest-ref="credentialResolutionRequest"
			c:nonceDAO-ref="nonceDAO" />

	<bean id="personSummaryClient" class="edu.byu.edge.client.pro.impl.PersonSummaryClientImpl"
			c:baseUrl="https://ws.byu.edu/rest/v2.0/identity/person/PRO"
			c:sharedSecretNonceEncodingFilter-ref="sharedSecretNonceEncodingFilter"
			c:readTimeout="30000"/>

	<cache:annotation-driven cache-manager="personSummaryClientCacheManager" />

	<bean id="personSummaryClientCacheManager" class="org.springframework.cache.ehcache.EhCacheCacheManager"
		p:cacheManager-ref="personSummaryClientEhcache" />

	<bean id="personSummaryClientEhcache" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean"
		p:configLocation="classpath:/edge/personSummary/personSummaryEhcache.xml" />

</beans>
